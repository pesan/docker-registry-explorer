<div class="container">
	<h1>
		<div class="btn-group pull-right">
			<button class="btn btn-sm btn-default" title="Refresh"
				ng-click="restate({ reload: true })">
				<i class="fa fa-refresh"></i>
			</button>
		</div>
		Browse
	</h1>
	<div class="row">
		<div class="col-sm-8 col-md-6">
			<form class="form" ng-submit="restate()">
				<label class="sr-only" for="query">Image name</label>
				<div class="input-group">
					<input type="text" id="query" size="40" placeholder="Search terms"
						class="form-control has-extension" ng-model="query" focus="!query"></input>
					<div class="input-group-btn">
						<input type="reset" class="btn btn-default fa control-extension" value="&#xf00d"
							tabindex="-1" ng-click="query=''; restate()"></input>
						<input type="submit" class="btn btn-primary fa" value="Find &#xf002;"></input>
					</div>
				</div>
			</form>
		</div>
	</div>

	<h1>Images</h1>
	<div>
		<table class="table table-condensed" ng-if="registry.error || !repository.results">
			<thead>
				<tr>
					<th>
						<i class="fa fa-database"></i>
						{{ registry.hostname }}:{{ registry.port }}
					</th>
					<th ng-if="registry.error">
						<button class="btn text-danger" title="Click to toggle error details"
								ng-click="registry.showError =! registry.showError">
							<i class="fa fa-warning"></i>
							<span class="hidden-xs hidden-sm">Unable to explore this registry</span>
						</button>
					</th>
				</tr>
			</thead>
		</table>
		<div class="text-center" ng-if="registry.error">
			<div collapse="!registry.showError">
				<pre class="text-left">{{ registry.error }}</pre>
			</div>
		</div>
		<table class="table table-condensed" ng-if="!registry.error && repository.results">
			<thead>
				<tr>
					<th colspan="4">
						<i class="fa fa-database"></i> {{ registry.hostname }}:{{ registry.port }}
					</th>
				</tr>
				<tr>
					<th>
						Image name
					</th>
					<th>
						<i class="fa fa-tag"></i> Tags
					</th>
					<th>
						<i class="fa fa-external-link"></i> URL
					</th>
					<th>
						Layer
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="image in repository.results">
					<td>
						<code>{{ image.name }}</code>
					</td>
					<td>
						<div class="list-inline">
							<button
								class="tag btn label label-default"
								ng-class="{'label-primary': image.tag.name==tag.name}"
								ng-click="selectTag(image, tag)"
								ng-repeat="tag in tags[image.name]">
								{{ tag.name }}
							</button>
						</div>
					</td>
					<td>
						<code>{{ image.tag.url }}</code>
					</td>
					<td>
						<imageid ng-if="!isOfficial" registry="registry" image="image.tag.layer" limit="8" />
						<code ng-if="isOfficial" title="Cannot view layers in the official registry">{{ image.tag.layer }}</code>
					</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="4">
						<pagination
							items-per-page="repository.page_size"
							total-items="repository.num_results"
							rotate="false"
							boundary-links="true"
							max-size="pagerSize"
							ng-model="repository.page"
							ng-change="restate()"
							previous-text="&lsaquo;"
							next-text="&rsaquo;"
							first-text="&laquo;"
							last-text="&raquo;">
						</pagination>
					</td>
				</tr>
			</tfoot>
		</table>
	</div>
</div>
